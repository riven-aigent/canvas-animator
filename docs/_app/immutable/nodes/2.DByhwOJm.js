import{w as j,i as ye,x as $,y as ee,z as we,A as Me,g as l,C as Se,H as Ee,F as fe,G as ae,I as G,J as Ae,K as xe,D as ne,L as Ce,M as ue,N as Te,O as H,P as ie,Q as ge,R as Re,S as ke,T as Ne,U as se,V as Fe,W as Ie,X as W,Y as ve,Z as Pe,_ as pe,$ as me,a0 as te,a1 as De,a2 as ze,a3 as $e,a4 as He,p as Le,t as ce,m as U,n as Oe,o as K,v as O,q as N,a5 as X,s as T,a6 as he,a7 as Ve,a8 as We,a9 as Ye}from"../chunks/Cf9gXw06.js";import{i as qe}from"../chunks/Be6gryri.js";import{t as Be,b as Ge,i as Ue,e as J,a as re}from"../chunks/BrvNypCE.js";import{o as Xe}from"../chunks/CaN-eVNQ.js";function Je(a,v){return v}function Ke(a,v,e){for(var t=[],h=v.length,f,c=v.length,r=0;r<h;r++){let d=v[r];me(d,()=>{if(f){if(f.pending.delete(d),f.done.add(d),f.pending.size===0){var m=a.outrogroups;le(se(f.done)),m.delete(f),m.size===0&&(a.outrogroups=null)}}else c-=1},!1)}if(c===0){var u=t.length===0&&e!==null;if(u){var n=e,g=n.parentNode;ze(g),g.append(n),a.items.clear()}le(v,!u)}else f={pending:new Set(v),done:new Set},(a.outrogroups??(a.outrogroups=new Set)).add(f)}function le(a,v=!0){for(var e=0;e<a.length;e++)$e(a[e],v)}var de;function Qe(a,v,e,t,h,f=null){var c=a,r=new Map;{var u=a;c=$?ee(we(u)):u.appendChild(j())}$&&Me();var n=null,g=ke(()=>{var p=e();return Ne(p)?p:p==null?[]:se(p)}),d,m=!0;function D(){M.fallback=n,Ze(M,d,c,v,t),n!==null&&(d.length===0?(n.f&H)===0?pe(n):(n.f^=H,Y(n,null,c)):me(n,()=>{n=null}))}var i=ye(()=>{d=l(g);var p=d.length;let S=!1;if($){var _=Se(c)===Ee;_!==(p===0)&&(c=fe(),ee(c),ae(!1),S=!0)}for(var F=new Set,E=Te,I=Re(),y=0;y<p;y+=1){$&&G.nodeType===Ae&&G.data===xe&&(c=G,S=!0,ae(!1));var R=d[y],w=t(R,y);if(ne){var A=t(R,y);w!==A&&Ce(String(y),String(w),String(A))}var x=m?null:r.get(w);x?(x.v&&ue(x.v,R),x.i&&ue(x.i,y),I&&E.unskip_effect(x.e)):(x=je(r,m?c:de??(de=j()),R,w,y,h,v,e),m||(x.e.f|=H),r.set(w,x)),F.add(w)}if(p===0&&f&&!n&&(m?n=ie(()=>f(c)):(n=ie(()=>f(de??(de=j()))),n.f|=H)),p>F.size&&(ne?ea(d,t):ge("","","")),$&&p>0&&ee(fe()),!m)if(I){for(const[Q,q]of r)F.has(Q)||E.skip_effect(q.e);E.oncommit(D),E.ondiscard(()=>{})}else D();S&&ae(!0),l(g)}),M={effect:i,items:r,outrogroups:null,fallback:n};m=!1,$&&(c=G)}function V(a){for(;a!==null&&(a.f&De)===0;)a=a.next;return a}function Ze(a,v,e,t,h){var w;var f=v.length,c=a.items,r=V(a.effect.first),u,n=null,g=[],d=[],m,D,i,M;for(M=0;M<f;M+=1){if(m=v[M],D=h(m,M),i=c.get(D).e,a.outrogroups!==null)for(const A of a.outrogroups)A.pending.delete(i),A.done.delete(i);if((i.f&H)!==0)if(i.f^=H,i===r)Y(i,null,e);else{var p=n?n.next:r;i===a.effect.last&&(a.effect.last=i.prev),i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),z(a,n,i),z(a,i,p),Y(i,p,e),n=i,g=[],d=[],r=V(n.next);continue}if((i.f&te)!==0&&pe(i),i!==r){if(u!==void 0&&u.has(i)){if(g.length<d.length){var S=d[0],_;n=S.prev;var F=g[0],E=g[g.length-1];for(_=0;_<g.length;_+=1)Y(g[_],S,e);for(_=0;_<d.length;_+=1)u.delete(d[_]);z(a,F.prev,E.next),z(a,n,F),z(a,E,S),r=S,n=E,M-=1,g=[],d=[]}else u.delete(i),Y(i,r,e),z(a,i.prev,i.next),z(a,i,n===null?a.effect.first:n.next),z(a,n,i),n=i;continue}for(g=[],d=[];r!==null&&r!==i;)(u??(u=new Set)).add(r),d.push(r),r=V(r.next);if(r===null)continue}(i.f&H)===0&&g.push(i),n=i,r=V(i.next)}if(a.outrogroups!==null){for(const A of a.outrogroups)A.pending.size===0&&(le(se(A.done)),(w=a.outrogroups)==null||w.delete(A));a.outrogroups.size===0&&(a.outrogroups=null)}if(r!==null||u!==void 0){var I=[];if(u!==void 0)for(i of u)(i.f&te)===0&&I.push(i);for(;r!==null;)(r.f&te)===0&&r!==a.fallback&&I.push(r),r=V(r.next);var y=I.length;if(y>0){var R=f===0?e:null;Ke(a,I,R)}}}function je(a,v,e,t,h,f,c,r){var u=(c&Fe)!==0?(c&Ie)===0?W(e,!1,!1):ve(e):null,n=(c&Pe)!==0?ve(h):null;return ne&&u&&(u.trace=()=>{r()[(n==null?void 0:n.v)??h]}),{v:u,i:n,e:ie(()=>(f(v,u??e,n??h,r),()=>{a.delete(t)}))}}function Y(a,v,e){if(a.nodes)for(var t=a.nodes.start,h=a.nodes.end,f=v&&(v.f&H)===0?v.nodes.start:e;t!==null;){var c=He(t);if(f.before(t),t===h)return;t=c}}function z(a,v,e){v===null?a.effect.first=e:v.next=e,e===null?a.effect.last=v:e.prev=v}function ea(a,v){const e=new Map,t=a.length;for(let h=0;h<t;h++){const f=v(a[h],h);if(e.has(f)){const c=String(e.get(f)),r=String(h);let u=String(f);u.startsWith("[object ")&&(u=null),ge(c,r,u)}e.set(f,h)}}function aa(a,v,e,t,h,f){var c=a.__className;if($||c!==e||c===void 0){var r=Be(e,t,f);(!$||r!==a.getAttribute("class"))&&(r==null?a.removeAttribute("class"):a.className=r),a.__className=e}else if(f&&h!==f)for(var u in f){var n=!!f[u];(h==null||n!==!!h[u])&&a.classList.toggle(u,n)}return f}var ta=K("<button> </button>"),ra=K('<button class="control-btn stop svelte-1uha8ag">‚èπ Stop</button>'),na=K('<button class="control-btn play svelte-1uha8ag">‚ñ∂ Play</button>'),ia=K('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">Canvas Animator</h1> <p class="svelte-1uha8ag">Generative art animations with HTML5 Canvas</p></header> <div class="main svelte-1uha8ag"><div class="canvas-container svelte-1uha8ag"><canvas class="svelte-1uha8ag"></canvas> <div class="overlay svelte-1uha8ag"><button class="icon-btn svelte-1uha8ag" title="Download frame">üì∑</button></div></div> <div class="controls svelte-1uha8ag"><div class="preset-grid svelte-1uha8ag"></div> <div class="playback-controls svelte-1uha8ag"><!></div> <div class="info svelte-1uha8ag"><p class="svelte-1uha8ag"> </p> <p class="svelte-1uha8ag"> </p></div></div></div></div>');function ua(a,v){Le(v,!1);let e=W(),t,h,f=W(!1),c=W(0);const r={particles:{name:"Particle Flow",setup:()=>({particles:Array.from({length:50},()=>({x:Math.random()*l(e).width,y:Math.random()*l(e).height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*4+2,color:`hsl(${Math.random()*60+200}, 70%, 60%)`}))}),render:s=>{t.fillStyle="rgba(10, 10, 15, 0.1)",t.fillRect(0,0,l(e).width,l(e).height),s.particles.forEach(o=>{o.x+=o.vx,o.y+=o.vy,(o.x<0||o.x>l(e).width)&&(o.vx*=-1),(o.y<0||o.y>l(e).height)&&(o.vy*=-1),t.beginPath(),t.arc(o.x,o.y,o.size,0,Math.PI*2),t.fillStyle=o.color,t.fill()})}},waves:{name:"Sine Waves",setup:()=>({time:0}),render:s=>{t.fillStyle="#0a0a0f",t.fillRect(0,0,l(e).width,l(e).height),s.time+=.02;for(let o=0;o<5;o++){t.beginPath(),t.strokeStyle=`hsl(${200+o*30}, 70%, 60%)`,t.lineWidth=2;for(let b=0;b<l(e).width;b+=5){const k=l(e).height/2+Math.sin(b*.01+s.time+o*.5)*50+Math.sin(b*.02+s.time*1.5)*25;b===0?t.moveTo(b,k):t.lineTo(b,k)}t.stroke()}}},spiral:{name:"Golden Spiral",setup:()=>({angle:0,points:[]}),render:s=>{t.fillStyle="rgba(10, 10, 15, 0.05)",t.fillRect(0,0,l(e).width,l(e).height),s.angle+=.05;const o=l(e).width/2,b=l(e).height/2,k=s.angle*2,L=o+Math.cos(s.angle)*k,C=b+Math.sin(s.angle)*k;s.points.push({x:L,y:C,age:0}),s.points=s.points.filter(P=>{P.age++;const B=1-P.age/100;return B<=0?!1:(t.beginPath(),t.arc(P.x,P.y,3,0,Math.PI*2),t.fillStyle=`hsla(${s.angle*10%360}, 70%, 60%, ${B})`,t.fill(),!0)})}},matrix:{name:"Matrix Rain",setup:()=>({drops:Array.from({length:Math.floor(l(e).width/20)},()=>({y:Math.random()*l(e).height,speed:Math.random()*3+2,chars:Array.from({length:20},()=>String.fromCharCode(12448+Math.random()*96))}))}),render:s=>{t.fillStyle="rgba(10, 10, 15, 0.1)",t.fillRect(0,0,l(e).width,l(e).height),t.font="14px monospace",s.drops.forEach((o,b)=>{o.y+=o.speed,o.y>l(e).height&&(o.y=-20),o.chars.forEach((k,L)=>{const C=o.y-L*20;if(C<0||C>l(e).height)return;const P=L===0?1:.5-L*.05;t.fillStyle=`rgba(0, 255, 100, ${Math.max(0,P)})`,t.fillText(k,b*20,C)}),Math.random()<.1&&(o.chars[Math.floor(Math.random()*o.chars.length)]=String.fromCharCode(12448+Math.random()*96))})}}};let u=W("particles"),n=null;function g(){if(!l(e))return;const s=l(e).getBoundingClientRect();he(e,l(e).width=s.width),he(e,l(e).height=s.height)}function d(){if(!l(f))return;const s=r[l(u)];s&&n&&s.render(n),Ye(c),h=requestAnimationFrame(d)}function m(){n||(n=r[l(u)].setup()),X(f,!0),d()}function D(){X(f,!1),h&&cancelAnimationFrame(h)}function i(s){X(u,s),n=r[s].setup(),l(f)&&(t.fillStyle="#0a0a0f",t.fillRect(0,0,l(e).width,l(e).height))}function M(){const s=document.createElement("a");s.download=`canvas-animator-${l(u)}-${Date.now()}.png`,s.href=l(e).toDataURL(),s.click()}Xe(()=>{D(),window.removeEventListener("resize",g)}),qe();var p=ia(),S=O(N(p),2),_=N(S),F=N(_);Ge(F,s=>X(e,s),()=>l(e));var E=O(F,2),I=N(E);T(E),T(_);var y=O(_,2),R=N(y);Qe(R,5,()=>Object.entries(r),Je,(s,o)=>{var b=Ve(()=>We(l(o),2));let k=()=>l(b)[0],L=()=>l(b)[1];var C=ta();let P;var B=N(C,!0);T(C),ce(()=>{P=aa(C,1,"preset-btn svelte-1uha8ag",null,P,{active:l(u)===k()}),re(B,L().name)}),J("click",C,()=>i(k())),U(s,C)}),T(R);var w=O(R,2),A=N(w);{var x=s=>{var o=ra();J("click",o,D),U(s,o)},Q=s=>{var o=na();J("click",o,m),U(s,o)};Ue(A,s=>{l(f)?s(x):s(Q,!1)})}T(w);var q=O(w,2),Z=N(q),_e=N(Z);T(Z);var oe=O(Z,2),be=N(oe);T(oe),T(q),T(y),T(S),T(p),ce(()=>{re(_e,`Frame: ${l(c)??""}`),re(be,`Preset: ${r[l(u)].name??""}`)}),J("click",I,M),U(a,p),Oe()}export{ua as component};
